(function(a,g,f){var c="http://localhost:8000/api";var b={userListItemCache:f('<li><span class="full-name"></span><span class="email"></span></li>')};var e={requestFailureHandler:function(d){if(d.responseJSON){alert(d.responseJSON.detail)}else{alert("Something went wrong, please try again!")}},login:function(d){return f.post(c+"/auth/login/",d).done(function(i,h){if(h==="success"){window.location="/mentee/dashboard"}}).fail(e.requestFailureHandler)},logout:function(){return f.post(c+"/auth/logout/").done(function(h,d){if(d==="success"){window.location="/mentee/"}}).fail(e.requestFailureHandler)},getMentors:function(){return f.get(c+"/getmentors").fail(e.requestFailureHandler)},getMentees:function(){return f.get(c+"/getmentees").fail(e.requestFailureHandler)},renderUserList:function(k,h){k.empty();for(var j=0;j<h.length;j++){var l=h[j];var d=b.userListItemCache.clone();f(".full-name",d).text(l.first_name+" "+l.last_name);f(".email",d).text(l.email);k.append(d)}},signInFormOnSubmit:function(d){d.preventDefault();var h=f("button[type=submit]",b.signInForm);if(!h.hasClass("loading")){h.addClass("loading");e.login(b.signInForm.serialize()).always(function(){h.removeClass("loading")})}},signUpFormOnSubmit:function(d){d.preventDefault();var h=f("button[type=submit]",b.signUpForm);if(!h.hasClass("loading")){h.addClass("loading");f.post(c+"/auth/signup/",b.signUpForm.serialize()).done(function(j,i){if(i==="success"){e.login(b.signUpForm.serialize())}}).fail(e.requestFailureHandler).always(function(){h.removeClass("loading")})}},getMentorsButtonOnClick:function(d){if(!b.getMentorsButton.hasClass("loading")){b.getMentorsButton.addClass("loading");e.getMentors().done(function(i,h){if(h==="success"){e.renderUserList(b.mentorsList,i)}}).always(function(){b.getMentorsButton.removeClass("loading")})}else{d.preventDefault()}},getMenteesButtonOnClick:function(d){if(b.getMenteesButton.hasClass("loading")){b.getMenteesButton.addClass("loading");e.getMentees().done(function(i,h){if(h==="success"){e.renderUserList(b.menteesList,i)}}).always(function(){b.getMenteesButton.removeClass("loading")})}else{d.preventDefault()}},logoutButtonOnClick:function(d){if(!b.logoutButton.hasClass("loading")){b.logoutButton.addClass("loading");e.logout().always(function(){b.logoutButton.removeClass("loading")})}else{d.preventDefault()}}};f(function(){b.signInForm=f("#sign-in-form",g).on("submit",e.signInFormOnSubmit);b.signUpForm=f("#sign-up-form",g).on("submit",e.signUpFormOnSubmit);b.getMentorsButton=f("#get-mentors-button",g).on("click",e.getMentorsButtonOnClick);b.mentorsList=f("#mentors-list",g);b.getMenteesButton=f("#get-mentees-button",g).on("click",e.getMenteesButtonOnClick);b.menteesList=f("#mentees-list",g);b.logoutButton=f("#logout-button",g).on("click",e.logoutButtonOnClick)});f(g).on("click",".popup-button",function(){var d=f("#popup-"+f(this).data("popup"),g);d.addClass("show")}).on("click",".popup-close-button",function(){var d=f(this).parent().parent().parent().parent().parent();d.removeClass("show")})})(window,document,jQuery);